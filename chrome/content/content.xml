<?xml version="1.0"?>
<bindings id="universalSearchBindings"
          xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">
  <binding id="autocomplete-rich-result-popup-univ-search" extends="chrome://browser/content/urlbarBindings.xml#urlbar-rich-result-popup" >
    <content ignorekeys="false" level="top" consumeoutsideclicks="false">
      <html:div anonid="universal-search-div"></div>
      <children />
    </content>

    <implementation >
       <constructor>
        <![CDATA[
          console.log('xbl constructor');
          this.setAttribute('foo', 'bar');
        ]]>
      </constructor>
      <method name="openAutocompletePopup">
        <parameter name="aInput"/>
        <parameter name="aElement"/>
        <body>
          <![CDATA[
          console.log('openAutocompletePopup');
          // initially the panel is hidden
          // to avoid impacting startup / new window performance
          aInput.popup.hidden = false;

          // this method is defined on the base binding
          this._openAutocompletePopup(aInput, aElement);
        ]]></body>
      </method>

      <method name="onPopupClick">
        <parameter name="aEvent"/>
        <body>
          <![CDATA[
          // Ignore right-clicks
          if (aEvent.button == 2)
            return;
        ]]></body>
      </method>

    </implementation>
  </binding>
</bindings>

